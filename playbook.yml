---
- name: Actions on all hosts
  hosts: all:!localactions
  become: true
  roles:
    - water-gkhs-packages
    - water-gkhs-listchanges
    - water-gkhs-update
    - water-gkhs-network
    - water-gkhs-users
    - { role: ansible.papertrail, tags: papertrail }
    - { role: water-gkhs-web-errors, tags: nginx }

- name: Actions on all non-local hosts
  hosts: external_hosts
  become: true
  roles:
    - { role: water-gkhs-mysql-backup, tags: mysql }

- name: Actions on all hosts running NGINX
  hosts: nginx_hosts
  become: true
  roles:
    - { role: water-gkhs-nginx, tags: nginx }

- name: Hello Firth
  hosts: firth
  become: true
  roles:
    - firth-packages
    - firth-users
    - firth-docker
    - plexupdate
    - { role: firth-nginx, tags: nginx }
    - water-gkhs-filebot
    - water-gkhs-flexget
    - water-gkhs-exim
    - b2-backup
    - github-cli
    - name: aws-route53
      role: aws-route53
      become: false
      connection: local
      tags: route53
    - { role: aws-pdforums, tags: pdforum }

- name: Hello Atoll
  hosts: atoll
  become: true
  roles:
    - water-gkhs-nginx
    - water-gkhs-exim
    - github-cli

- name: Hello Caisson
  hosts: caisson
  become: true
  roles:
    - water-gkhs-nginx
